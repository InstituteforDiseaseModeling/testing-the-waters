# testing_the_waters

Investigate the impact of different diagnostic screening and school reopening scenarios.

## Reproducing the results

Single Covasim simulations are generated by the `create_sim` function within the `create_sim.py` script. This file also defines the free parameters and parameter ranges that are used during model calibration.

1. Population files are slow to generate, so we create and cache these in advance.  To make the files, run `create_sp_pop.py`.  We have provided the files used in generating main resluts in `v20201019/inputs`.

1. Calibrate the model using `calibrate_model.py`.  This will produce a file with a long name that begins with `pars_*` in the specified folder.  We have included the parameter files used in the main analysis.

1. School reopening and diagnostic sceening scenarios are defined in `testing_scenarios.py`.

1. Run the main analysis by calling `run_testing_scenarios.py`.  This will run the specified scenarios and save simulation objects to the `sims` subfolder within the specified folder, e.g. v20201019.

1. Generate plots by calling `plot_testing.py`.  This will produce Figures 1, 2, and 4.  Figure 7 is also generated from this script.


## Sensitivity scenarios

1. Run the simulations by calling `run_sensitivity_scenarios.py`

1. Plot the results by calling `plot_sensitivity.py`. This will produce Figure 5.


## Countermeasure scenarios

1. First run the simulations by calling `run_countermeasure_scenarios.py`

1. Plot the resulting simulations by calling `plot_countermeasures.py`. This will produce Figure 6.

## Additional scripts and utilities

* `pcr_days_sweep.py`: Produces Figure 3 in the report
* `pcr_vs_ag_delay.py`: Produces Figure 10 in the report
* `run_and_plot_calib.py`: Produces Figure 9 in the report

* `plot_pars.py`: Plots parameters selected during model calibration
* `check_pops.py`: Loads population files and prints statistics
* `combine.py`: Combines several `msim` or `sims` objects into a single list of simulations.
* `trans_r0.py`: Estimate R0 in schools by starting with a fully susceptible population and seeding one infection into each school.
